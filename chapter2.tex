\chapter{State of the art} \label{chap:sota}

\section*{}

In this chapter we will describe several studies regarding the optimization of
solid waste collection routes. We will also review the mathematical models used
in these studies and provide alternative optimization techniques that can be
applied to each one.

In section~\ref{section:problem} the route collection problem will be detailed.
Section~\ref{section:math} will mathematically formalize the three problem
variants. The following sections in this  chapter present approaches applied to
the cities of Trabon, Turkey\citep{Apaydin2007}, Barcelona,
Spain\citep{Bautista2004}, Athens, Greece\citep{Karadimas2005}, Hanoi,
Vietnam\citep{Tung2000} and Porto Alegre, Brazil\citep{Li2008}. 

\section{General problem description}
\label{section:problem}

As stated by \citet{Golden01}, one can divide waste collection routing problems
into three main categories. First, there is commercial collection, which
regards waste collection from businesses and organizations like malls,
factories and such. Second, the residential collection problem involves
collecting household generated waste, usually stored in containers along the
streets of a city.  Comparatively, the number of containers in the commercial
problem is significantly smaller than in the residential case.

In both of these two variants, each waste collection vehicle travels to a
container, loads its contents into its hopper and moves on to the next
container. As soon as the hopper is full, the vehicle travels to a landfill (or
other recycling/treatment facility) and deposits the collected waste.

The third variant --- named Rollon-Rolloff, which is described in
\cite{Bodin00} --- involves large containers, which must be transported
to the disposal facilities and replaced by empty ones. Their dimensions impose
that each vehicle can only transport a single container (either full or empty)
at a time. 

In the Rollon-Rolloff original description, each waste collection vehicle can
perform four basic operations:

\begin{itemize}
\item \textbf{Round trip} --- the vehicle picks up a container, brings it to a
waste disposal facility (WDF) for emptying and returns it to its original
location;

\item \textbf{Exchange trip} --- the vehicle leaves the WDF with an empty
container, travels to a location with a full one and switches them, bringing it
back to the WDF;

\item \textbf{Insertion trip} --- the vehicle brings an empty container from
the WDF to a new location;

\item \textbf{Removal trip} --- the vehicle picks up a full container from a
location and leaves it at the WDF.
\end{itemize}

In each of these three main variants, extra parameters can vary. For example,
we can consider a scenario with either a single or multiple waste disposal
facilities. In the multiple facilities case, an extra restriction may be to
balance the waste disposed at each location.

\section{Mathematical models}
\label{section:math}

All three variants described in section~\ref{section:problem} have a common
base for their mathematical models --- waste collection vehicles that travel
along the streets of a given city. To model a city, the common approach is to
define a graph in which each street is represented by one or two arcs
(depending if the street is one or both ways), with street intersections being
the vertices. Each arc may have several associated weights, reflecting the
street distance, the time it takes to transverse it, or some other metric. As
such, we define a city graph as the ordered tuple $G = (V, A)$, where $V$
represent the vertices and $A$ the arcs.

This definition alone does not suffice to realistically represent the possible
vehicle routes, as there are extra restrictions which must be considered,
specially regarding traffic signs. For example: at a given intersection, it may
not be possible to take a left turn if you are arriving from a specific street.
U-turns may also be forbidden, in certain intersections. 

These restrictions can be specified by defining a cost for every pair of arcs
that intersect at a given vertex.  We denote $t_{ava^\prime}$ as being the
cost to go from the arc $a$ to arc $a^\prime$ by making a turn at $v$. If the
arcs don't intersect at that vertex, or if the traffic signs forbid such a
turn, we set $t_{ava^\prime} = +\infty$. Further details on this approach can
be seen in \citet{Corberan2002887}.

For now, we shall consider the case in which there is a single disposal
facility, located in vertex $v_0 \in V$, and that all waste collection vehicles
start and finish their routes there. We consider that there are $K$ vehicles
available, and that each of the $K$ routes can be defined as a set of round
trips, each starting at the disposal facility. We may or may not decide to
limit the number of round trips in each route to one.

Further more, we consider vehicles being limited to an amount $Q$ of waste that
they can carry at any given time. This can be either measured in weight or in
volume.





\subsection{Residential scenario}

In the residential scenario, it is usual to model it as a \textit{Capacitated Arc
Routing Problem} (CARP). Due to the container density per street, we consider
that vehicles should serve arcs instead of individual nodes.

A detailed description of CARP can be found in \citet{Sniezek01}, and a
mathematical model is provided in \citet{Belenguer98}. In the latter document,
it is assumed that each vehicle is limited to a single round trip. This happens
due to the chosen minimization criteria. Here, the goal was to minimize the
total cost of transversing and servicing the arcs in the calculated routes.
With this metric, allowing a vehicle to perform more than a single round trip
is the same as allowing for more than $K$ vehicles.

We consider that there is a subset $A_R \in A$ which represents the arcs that
must be serviced, and define $d_{a^\prime} \in \mathbb{R}$, with $a^\prime \in
A_R$, as the quantity of waste that needs to be collected at that arc. The
remaining arcs are called \textit{deadheading} arcs. The routes set is
identified by $I = \{1, ..., K\}$.

Then, we define a solution as a pair $(x, y)$, in which:

\begin{align*}
x_{ap} = & \quad \left\{
	\begin{array}{ll}
		1 & \quad \mbox{if vehicle $p \in I$ serves arc $a \in A_R$} \\
		0 & \quad \mbox{otherwise}
	\end{array}
	\right. \\
y_{ap} = & \quad \mbox{number of times vehicle $p \in I$ visits $a \in A$ without servicing it}
\end{align*}

From these variables, two extra functions are defined. The first,
$x_p(A_R^\prime) \in \mathbb{Z}_{\geq0}$, defines the number of arcs serviced
by vehicle $p \in I$ that are in $A_R^\prime \in A_R$. The second function,
$y_p(A^\prime) \in \mathbb{Z}_{\geq0}$, represents the total number of times
that vehicle $p \in I$ transverses the arcs in $A^\prime \in A$. These two
functions can be defined as follow:

\begin{align}
	\forall_{p \in I, A_R^\prime \in A_R}	\quad x_p(A_R^\prime) = & \quad \sum_{a \in A_R^\prime} x_{ap} \\
	\forall_{p \in I, A^\prime \in A}	\quad y_p(A^\prime) =   & \quad \sum_{a \in A^\prime} y_{ap}
\end{align}

Another important definition is the \textit{cutset}. For a given set $S
\subseteq V$, $\delta(S) \in A$ represents the set of arcs that have one vertex
in $S$ and the other one in $V - S$. Additionally, we define $A(S) \in A$ as
the set of arcs with both endpoints in $S$. Their analogous functions,
$\delta_R(S)$ and $A_R(S)$ are restricted to the set of arcs which require
servicing.

\begin{align}
	\delta(S)	&= \{ (i, j) \in A : i \in S \wedge j \notin S \} \\
	A(S)		&= \{ (i, j) \in A : i,j \in S \} \\
	\delta_R(S)	&= \delta(S) \cap A_R \\
	A_R(S)		&= A(S) \cap A_R
\end{align}

With these definitions, \citet{Belenguer98} defines CARP as the following
integer programming formulation:

\begin{align}
	\mbox{Minimize} & \quad \sum_{p \in I} \sum_{a \in A_R} c_a x_{ap} +
	\sum_{p \in I} \sum_{a \in A} c_{a} y_{ap}
	\\
	\mbox{subject to} &  \notag{} \\
	\forall_{a \in A_R} & \quad \sum_{p \in I} x_{ap} = 1
	\label{carp:required}
	\\
	\forall_{p \in I} & \quad \sum_{a \in A_R} d_a x_{ap} \leq Q
	\label{carp:capacity}
	\\
	\forall_{p \in I, S \subseteq V \setminus \{v_0\}, a \in A_R(S)} &
	\quad x_p(\delta_R(S)) + y_p(\delta(S)) \geq 2x_{ap}
	\label{carp:connectivity}
	\\
	\forall_{p \in I, S \subseteq V \setminus \{v_0\}} & \quad
	x_p(\delta_R(S)) + y_p(\delta(S)) = 0 \pmod{2}
	\label{carp:euler}
	\\
	\forall_{p \in I, a \in A} & \quad y_{ap} \in \mathbb{Z}_{\geq0} \\
	\forall_{p \in I, a \in A_R} & \quad x_{ap} \in \{0, 1\}
\end{align}

Constraints \eqref{carp:required} ensure that all arcs that required arcs are
serviced by one vehicle, while constraints \eqref{carp:capacity} ensure that each
vehicle does not collect more waste than its own capacity.

Constraints \eqref{carp:connectivity} imply that every vehicle $p$ that serves
an arc $a$ has its route connecting $v_0$ to $a$. Finally, constraints
\eqref{carp:euler} force each vehicle route to be a set of Eulerian circuits.

These constraints aren't strict enough so that every solution represents a set
of $K$ routes. There may be cases in which a vehicle route is defined by two or
more disconnected Eulerian circuits. This isn't considered as a problem,
because constraints~\eqref{carp:connectivity} force that all circuits
disconnected from $v_0$ contain only deadheading arcs. Since arc costs in the
minimization function are non-negative, each solution to the Integer Program
will has an associated K-route solution --- we just need to remove circuits
which are disconnected from $v_0$.




\subsection{Commercial scenario}

When comparing the commercial and residential collection problems, one expects
that the number of containers is significantly lower in the first case. This
allows us to model the problem as a node/vertex routing problem, which is also
known as the \textit{Vehicle Routing Problem} (VRP). Applications of this model
are described in \citet{Tung2000} and \citet{Kim06}.

In this approach, each vertex $v \in V \setminus {v_0}$ has a demand $d_v \in
\mathbb{R}_{\geq0}$. Vehicle routes must cross all vertices whose demand is
greater than $0$. Although commercial waste containers aren't usually located
at street intersections, one can create additional vertices by splitting arcs.

Another technique would be to create $G^\prime = (V^\prime, A^\prime)$ in which
each vertex represents a waste container and the disposal facility. Each arc
$(i, j) \in A^\prime$ has an associated cost of travelling from vertex $i$ to
$j$, which can be easily obtained by applying a shortest path procedure to
graph $G$. Another consideration is that while $G^\prime$ has less vertices
than $G$, it is a fully connected graph. When using $G^\prime$ to define a
mathematical model, we consider that the vehicles must only visit each vertex
$v \in V^\prime \setminus \{v_0\}$ exactly once.

Since the graph is directed, this problem is usually named \textit{Asymmetric
Capacitated Vehicle Routing Problem} (ACVRP).  The most common mathematical
model\citep{Toth01} is based on the concept of $G^\prime$, and defines a
solution as a set of binary variables $x_{ij}$, one for each arc $(i, j)$.
Additionally, we consider $r(S), S \subseteq V \setminus \{v_0\}$ as the
minimum number of vehicles to serve all vertices in $S$. This value, that can
be determined by solving the \textit{Bin Packing Problem} (BPP), has a trivial
lower bound:

\begin{equation}
\forall_{S \subseteq V^\prime \setminus \{v_0\}} \quad r(S) \geq
\lceil\frac{1}{Q} \sum_{v \in V^\prime} d_{v} \rceil
\end{equation}

These definitions allows us to define ACVRP as the following integer
programming formulation:

\begin{align}
	\mbox{Minimize} & \sum_{i \in V^\prime} \sum_{j \in V} c_{ij} x_{ij}
	\\
	\mbox{subject to} & \notag{}
	\\
	\forall_{j \in V \setminus \{v_0\}} & \quad \sum_{i \in V} x_{ij} = 1
	\label{acvrp:indegree}
	\\
	& \quad \sum_{i \in V} x_{v_0i} = K
	\label{acvrp:outdepot}
	\\
	\forall_{i \in V} & \quad \sum_{j \in V} x_{ij} = \sum_{j \in V} x_{ji}
	\label{acvrp:in-out}
	\\
	\forall_{S \subseteq V \setminus \{v_0\}, S \neq \emptyset} & \quad
	\sum_{i \notin S} \sum_{i \in S} x_ij \geq r(S)
	\label{acvrp:capacity}
	\\
	\forall_{i, j \in V} & \quad x_{ij} \in \{0, 1\}
\end{align}

Constraints \eqref{acvrp:indegree} impose that each vertex is visited exactly
once, while constraints \eqref{acvrp:outdepot} force that exactly $K$ vehicles
leave the disposal facility and \eqref{acvrp:in-out} forces that every vehicle
that visits a node must leave it. Finally, \eqref{acvrp:capacity} ensures that
each subset of vertices is serviced by at least the minimum number of vehicles
required to fulfill their demands, thus respecting the capacity constraints.





\subsection{Rollon-Rolloff scenario}

Regarding the Rollon-Rolloff case, the earliest studies we are familiar with
are \citet{Cristallo94}, \citet{Meulemeester97}, \citet{Bodin00}. According to
Bodin et al., the first three papers assume that it is known beforehand which
trip type (see section~\ref{section:problem} must serve each container. This
problem is defined as the \textit{Rolloff-Rollon Vehicle Routing Problem}
(RRVRP).

Each given trip $t \in T$ is defined by its type and by a tuple of vertices to
visit, in a specific order. The problem of assigning trips to vehicles can be
formulated as an \textit{Asymmetric Vehicle Routing Problem} (AVRP). AVRP is
similar to the ACVRP without the vehicle capacity constraints, but differs in
that the number of vehicles isn't given --- it is a value which we seek to
minimize. Usually, the number of vehicles must be bounded by a given interval
$[L, U]$.

In order to model the RRVRP as a AVRP, we define a new graph, $G^\prime =
(V^\prime, A^\prime)$. The vertices on this new graph are the disposal facility
node and a node for each trip to be serviced. Arc $(i, j) \in A^\prime$
represent the transition between trip $i$ and trip $j$. When $i = 0$, we
consider this transition to be the start of a route; when $j = 0$, we consider
it as the end. The costs of going from the end location of a given trip to the
start location of another one are given by $c_{a}, a \in A^\prime$.

The AVRP formulation for the RRVRP can now be defined as:

\begin{align}
	\mbox{Minimize} & \quad K_A \sum_{i \in V^\prime} \sum_{j \in V} c_{ij} x_{ij} +
				K_B \sum_{j \in V} x_{v_0j}
	\\
	\mbox{subject to} & \notag{}
	\\
	\forall_{j \in V \setminus \{v_0\}} & \quad \sum_{i \in V} x_{ij} = 1
	\label{avrp:indegree}
	\\
	\forall_{i \in V} & \quad \sum_{j \in V} x_{ij} = \sum_{j \in V} x_{ji}
	\label{avrp:in-out}
	\\
	& \quad \sum_{j \in V} x_{v_0j} \leq U \label{avrp:upper-k} \\
	& \quad \sum_{j \in V} x_{v_0j} \geq L \label{avrp:lower-k} \\
	\forall_{i, j \in V} & \quad x_{ij} \in \{0, 1\}
\end{align}

Another formulation is provided in \citet{Baldacci06}. This paper does not
assume, as the previous ones, that the trips to be serviced are predefined.
Furthermore, it addresses the problem of having multiple disposal facilities
and multiple inventory locations (where empty containers are stored). The
authors named this as the \textit{Multiple Rollon-Rolloff Vehicle Routing
Problem} (M-RRVRP). The M-RRVRP is converted to a \textit{Vehicle Routing
Problem with Time Windows} (VRPTW). Then, the problem is modeled as a
\textit{Set Partitioning} (SP) formulation.

A similar problem is defined by \citet{Archetti05}, named \textit{1-Skip
(container) Collection Problem} (1-SCP). Here, multiple disposal facilities are
available, and there are compatibility constraints between the facilities and
the containers. The trips that each vehicle can perform are different from the
four types defined in the RRVRP. Each vehicle starts its tour from a depot with
an empty container and travels to a location where there is a full one. The two
containers are then exchanged, and the vehicle proceeds with the full container
to a compatible disposal facility. It then proceeds to another trip, with a new
empty container. This model also considers time windows for picking up and
emptying containers.

The authors of \citet{Aringhieri04} also present a rather interesting
alternative for the Rollon-Rolloff model. They start by considering that
there's a finite number of available empty containers at the depot, $K_C$, and
compatibility constraints defined in the 1-SCP model are also present. Each
request for collection $i \in I, I = {1, ..., n}$ is characterized by its location
($\gamma_i$), container type ($\beta_{i}$) and waste material type ($\mu_i$). 

The graph model $G = (V, A)$ defines its vertices as representations of
collection requests. For each request $i$, there are two nodes $e_i$ and $f_i$
in $V$, that represent the full container to be collected and an empty
container to be delivered. As usual, we have a vertex $v_0$ representing the
depot from where the vehicles must begin and end their tours. There are also
$K_C$ vertices (the set $D^\prime$), representing the possible pickup of an empty
container at the depot, and $K_C$ vertices (the set $D^{\prime\prime}$) representing
their delivery. No nodes will be added to represent the disposal facilities;
this information will be embed in the graph arcs.

Let $E = \{e_i : i \in I\}$, $F = \{f_i : i \in I\}$. Defining the set of
vertices as $V = \{v_0\} \cup E \cup F \cup D^\prime \cup D^{\prime\prime}$, we
now need to specify the arcs connecting them.

There's an arc between $f_i \in F$ and $e_j \in E$ if both services have the
same container type ($\beta_i = \beta_j$). These arcs correspond to picking up
a full container at $\gamma_i$, taking it to a disposal facility of type
$\mu_i$ for emptying and deploying it at location $\gamma_j$.

Between every $e_i \in E$ and $f \in F$, we also have an arc. It represents
deploying an empty container at location $\gamma_i$ and travelling to
$\gamma_j$ to pick up its full container.

At the start of a tour, a vehicle starts at the depot node, $v_0$, unloaded.
From here, there are two alternatives: it travels to a location with a full
container or it picks up an empty container. These operations are represented
by the arcs $(v_0, f), f \in F$ and $(v_0, d^\prime), \in D^\prime$.
Analogously, we have the arcs that represent unloading an empty container and
finishing the tour. These arcs are defined by $(e, v_0), e \in E$ and
$(d^{\prime\prime}, v_0), d^{\prime\prime} \in D^{\prime\prime}$.

Picking up an empty container from the depot and deploying it is represented by
the arcs $(d^\prime, e), d^\prime \in D^\prime \wedge e \in E$. Picking up a
full container, emptying it at a disposal facility and dropping it at the depot
is modeled by the arcs $(f, d^{\prime\prime}), f \in F \wedge d^{\prime\prime}
\in D^{\prime\prime}$. Finally, we have the cases where a vehicle drops an
empty container at the depot to pick up another empty one, of another type, or
a full one: $(d^{\prime\prime}, d^\prime), d^{\prime\prime} \in
D^{\prime\prime} \wedge d^\prime \in D^\prime$ and $(d^{\prime\prime}, f),
d^{\prime\prime} \in D^{\prime\prime} \wedge f \in F$.

To help clarify, an example graph is provided in figure~\ref{fig:avrp-rr}, with
two requests and an empty container at the depot, all with the same type.
Removing $v_0$, the graph should become bipartite, as a vehicle can only go
from nodes from which it leaves loaded to a node from which he leaves unloaded.

\begin{figure}[th]
  \begin{center}
    \leavevmode
    \input{figures/avrp-rr}
    \caption{Graph for the Rollon-Rolloff problem. Thick vertices (except
    $v_0$) represent nodes from which the vehicle leaves loaded. Thin vertices
    are the ones from which it leaves unloaded.}
    \label{fig:avrp-rr}
  \end{center}
\end{figure}

This can now be modeled as an instance of AVRP. The costs $c_{ij}$ associated
with each arc are further detailed in \citet{Aringhieri04}.  We define
$\delta^+(v)$ as the out-neighbourhood of $v$ and $\delta^-(v)$ as its
in-neighbourhood. Without the time constraints, we obtain the following
formulation:

\begin{align}
	\mbox{Minimize} & \quad K_A \sum_{(i, j) \in A} c_{ij} x_{ij} +
				K_B \sum_{j \in \delta^-(v_0)} x_{v_0j}
	\\
	\mbox{subject to} & \notag{}
	\\
	\forall_{i \in F \cup E} & \quad \sum_{j \in \delta^+(i)} x_{ij} = 1
	\label{avrp-rr:indegree}
	\\
	\forall_{i \in V} & \quad \sum_{j \in \delta^+(i)} x_{ij} = \sum_{j \in \delta^-(i)} x_{ji}
	\label{avrp-rr:in-out}
	\\
	& \quad \sum_{j \in V} x_{0j} \leq U \label{avrp-rr:upper-k} \\
	& \quad \sum_{j \in V} x_{0j} \geq L \label{avrp-rr:lower-k} \\
	\forall_{i \in D^\prime \cup D^{\prime\prime}} & \quad \sum_{j \in \delta^+(i)} x_{ij} \leq 1 \\
	\forall_{i, j \in V} & \quad x_{ij} \in \{0, 1\}
\end{align}


